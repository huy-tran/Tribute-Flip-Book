window.Modernizr=function(t,e,a){function r(t){m.cssText=t}function i(t,e){return typeof t===e}function n(t,e){for(var r in t)if(m[t[r]]!==a)return"pfx"==e?t[r]:!0;return!1}function s(t,e,r){for(var n in t){var s=e[t[n]];if(s!==a)return r===!1?t[n]:i(s,"function")?s.bind(r||e):s}return!1}function o(t,e,a){var r=t.charAt(0).toUpperCase()+t.substr(1),o=(t+" "+b.join(r+" ")+r).split(" ");return i(e,"string")||i(e,"undefined")?n(o,e):(o=(t+" "+x.join(r+" ")+r).split(" "),s(o,e,a))}var h,p,d,l="2.5.3",c={},u=!0,f=e.documentElement,g="modernizr",v=e.createElement(g),m=v.style,w=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),y="Webkit Moz O ms",b=y.split(" "),x=y.toLowerCase().split(" "),M={},P=[],_=P.slice,z=function(t,a,r,i){var n,s,o,h=e.createElement("div"),p=e.body,d=p?p:e.createElement("body");if(parseInt(r,10))for(;r--;)o=e.createElement("div"),o.id=i?i[r]:g+(r+1),h.appendChild(o);return n=["&#173;","<style>",t,"</style>"].join(""),h.id=g,(p?h:d).innerHTML+=n,d.appendChild(h),p||(d.style.background="",f.appendChild(d)),s=a(h,t),p?h.parentNode.removeChild(h):d.parentNode.removeChild(d),!!s},j={}.hasOwnProperty;d=i(j,"undefined")||i(j.call,"undefined")?function(t,e){return e in t&&i(t.constructor.prototype[e],"undefined")}:function(t,e){return j.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var a=_.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=e.prototype;var n=new i,s=e.apply(n,a.concat(_.call(arguments)));return Object(s)===s?s:n}return e.apply(t,a.concat(_.call(arguments)))};return r});(function(t,a){var r=t.join(""),i=a.length;z(r,function(t,a){for(var r=e.styleSheets[e.styleSheets.length-1],n=(r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"",t.childNodes),s={};i--;)s[n[i].id]=n[i];c.csstransforms3d=9===(s.csstransforms3d&&s.csstransforms3d.offsetLeft)&&3===s.csstransforms3d.offsetHeight},i,a)})([,["@media (",w.join("transform-3d),("),g,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")],[,"csstransforms3d"]);M.csstransforms=function(){return!!o("transform")},M.csstransforms3d=function(){var t=!!o("perspective");return t&&"webkitPerspective"in f.style&&(t=c.csstransforms3d),t};for(var O in M)d(M,O)&&(p=O.toLowerCase(),c[p]=M[O](),P.push((c[p]?"":"no-")+p));return r(""),v=h=null,function(t,e){function a(t,e){var a=t.createElement("p"),r=t.getElementsByTagName("head")[0]||t.documentElement;return a.innerHTML="x<style>"+e+"</style>",r.insertBefore(a.lastChild,r.firstChild)}function r(){var t=d.elements;return"string"==typeof t?t.split(" "):t}function i(t){var e={},a=t.createElement,i=t.createDocumentFragment,n=i();t.createElement=function(t){var r=(e[t]||(e[t]=a(t))).cloneNode();return d.shivMethods&&r.canHaveChildren&&!p.test(t)?n.appendChild(r):r},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(t){return e[t]=a(t),n.createElement(t),'c("'+t+'")'})+");return n}")(d,n)}function n(t){var e;return t.documentShived?t:(d.shivCSS&&!s&&(e=!!a(t,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),o||(e=!i(t)),e&&(t.documentShived=e),t)}var s,o,h=t.html5||{},p=/^<|^(?:button|form|map|select|textarea)$/i;!function(){var t=e.createElement("a");t.innerHTML="<xyz></xyz>",s="hidden"in t,o=1==t.childNodes.length||function(){try{e.createElement("a")}catch(t){return!0}var a=e.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}();var d={elements:h.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:h.shivCSS!==!1,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:n};t.html5=d,n(e)}(this,e),c._version=l,c._prefixes=w,c._domPrefixes=x,c._cssomPrefixes=b,c.testProp=function(t){return n([t])},c.testAllProps=o,c.testStyles=z,f.className=f.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(u?" js "+P.join(" "):""),c}(this,this.document),function(t,e,a){function r(t){return"[object Function]"==v.call(t)}function i(t){return"string"==typeof t}function n(){}function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function o(){var t=m.shift();w=1,t?t.t?f(function(){("c"==t.t?c.injectCss:c.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),o()):w=0}function h(t,a,r,i,n,h,p){function d(e){if(!u&&s(l.readyState)&&(y.r=u=1,!w&&o(),l.onload=l.onreadystatechange=null,e)){"img"!=t&&f(function(){x.removeChild(l)},50);for(var r in j[a])j[a].hasOwnProperty(r)&&j[a][r].onload()}}var p=p||c.errorTimeout,l={},u=0,v=0,y={t:r,s:a,e:n,a:h,x:p};1===j[a]&&(v=1,j[a]=[],l=e.createElement(t)),"object"==t?l.data=a:(l.src=a,l.type=t),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){d.call(this,v)},m.splice(i,0,y),"img"!=t&&(v||2===j[a]?(x.insertBefore(l,b?null:g),f(d,p)):j[a].push(l))}function p(t,e,a,r,n){return w=0,e=e||"j",i(t)?h("c"==e?P:M,t,e,this.i++,a,r,n):(m.splice(this.i++,0,t),1==m.length&&o()),this}function d(){var t=c;return t.loader={load:p,i:0},t}var l,c,u=e.documentElement,f=t.setTimeout,g=e.getElementsByTagName("script")[0],v={}.toString,m=[],w=0,y="MozAppearance"in u.style,b=y&&!!e.createRange().compareNode,x=b?u:g.parentNode,u=t.opera&&"[object Opera]"==v.call(t.opera),u=!!e.attachEvent&&!u,M=y?"object":u?"script":"img",P=u?"script":M,_=Array.isArray||function(t){return"[object Array]"==v.call(t)},z=[],j={},O={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};c=function(t){function e(t){var e,a,r,t=t.split("!"),i=z.length,n=t.pop(),s=t.length,n={url:n,origUrl:n,prefixes:t};for(a=0;s>a;a++)r=t[a].split("="),(e=O[r.shift()])&&(n=e(n,r));for(a=0;i>a;a++)n=z[a](n);return n}function s(t,i,n,s,h){var p=e(t),l=p.autoCallback;p.url.split(".").pop().split("?").shift(),p.bypass||(i&&(i=r(i)?i:i[t]||i[s]||i[t.split("/").pop().split("?")[0]]||o),p.instead?p.instead(t,i,n,s,h):(j[p.url]?p.noexec=!0:j[p.url]=1,n.load(p.url,p.forceCSS||!p.forceJS&&"css"==p.url.split(".").pop().split("?").shift()?"c":a,p.noexec,p.attrs,p.timeout),(r(i)||r(l))&&n.load(function(){d(),i&&i(p.origUrl,h,s),l&&l(p.origUrl,h,s),j[p.url]=2})))}function h(t,e){function a(t,a){if(t){if(i(t))a||(l=function(){var t=[].slice.call(arguments);c.apply(this,t),u()}),s(t,l,e,0,p);else if(Object(t)===t)for(h in o=function(){var e,a=0;for(e in t)t.hasOwnProperty(e)&&a++;return a}(),t)t.hasOwnProperty(h)&&(!a&&!--o&&(r(l)?l=function(){var t=[].slice.call(arguments);c.apply(this,t),u()}:l[h]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),u()}}(c[h])),s(t[h],l,e,h,p))}else!a&&u()}var o,h,p=!!t.test,d=t.load||t.both,l=t.callback||n,c=l,u=t.complete||n;a(p?t.yep:t.nope,!!d),d&&a(d)}var p,l,u=this.yepnope.loader;if(i(t))s(t,0,u,0);else if(_(t))for(p=0;p<t.length;p++)l=t[p],i(l)?s(l,0,u,0):_(l)?c(l):Object(l)===l&&h(l,u);else Object(t)===t&&h(t,u)},c.addPrefix=function(t,e){O[t]=e},c.addFilter=function(t){z.push(t)},c.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",l=function(){e.removeEventListener("DOMContentLoaded",l,0),e.readyState="complete"},0)),t.yepnope=d(),t.yepnope.executeStack=o,t.yepnope.injectJs=function(t,a,r,i,h,p){var d,l,u=e.createElement("script"),i=i||c.errorTimeout;u.src=t;for(l in r)u.setAttribute(l,r[l]);a=p?o:a||n,u.onreadystatechange=u.onload=function(){!d&&s(u.readyState)&&(d=1,a(),u.onload=u.onreadystatechange=null)},f(function(){d||(d=1,a(1))},i),h?u.onload():g.parentNode.insertBefore(u,g)},t.yepnope.injectCss=function(t,a,r,i,s,h){var p,i=e.createElement("link"),a=h?o:a||n;i.href=t,i.rel="stylesheet",i.type="text/css";for(p in r)i.setAttribute(p,r[p]);s||(g.parentNode.insertBefore(i,g),f(a,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(t){"use strict";function e(t,e,a){if(a[0]&&"object"!=typeof a[0]){if(e[a[0]])return e[a[0]].apply(t,Array.prototype.slice.call(a,1));throw f(a[0]+" is not a method or property")}return e.init.apply(t,a)}function a(t,e,a,r){return{css:{position:"absolute",top:t,left:e,overflow:r||"hidden",zIndex:a||"auto"}}}function r(t,e,a,r,i){var s=1-i,o=s*s*s,h=i*i*i;return n(Math.round(o*t.x+3*i*s*s*e.x+3*i*i*s*a.x+h*r.x),Math.round(o*t.y+3*i*s*s*e.y+3*i*i*s*a.y+h*r.y))}function i(t){return t/x*180}function n(t,e){return{x:t,y:e}}function s(){var t;if(t=/AppleWebkit\/([0-9\.]+)/i.exec(navigator.userAgent)){var e=parseFloat(t[1]);return e>534.3}return!0}function o(t,e,a){return m&&a?" translate3d("+t+"px,"+e+"px, 0px) ":" translate("+t+"px, "+e+"px) "}function h(t){return" rotate("+t+"deg) "}function p(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function d(){for(var t=["Moz","Webkit","Khtml","O","ms"],e=t.length,a="";e--;)t[e]+"Transform"in document.body.style&&(a="-"+t[e].toLowerCase()+"-");return a}function l(){var t,e=document.createElement("fakeelement"),a={transition:"transitionend",OTransition:"oTransitionEnd",MSTransition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in a)if(void 0!==e.style[t])return a[t]}function c(t,e,a,r,i){var s,o=[];if("-webkit-"==y){for(s=0;i>s;s++)o.push("color-stop("+r[s][0]+", "+r[s][1]+")");t.css({"background-image":"-webkit-gradient(linear, "+e.x+"% "+e.y+"%,"+a.x+"% "+a.y+"%, "+o.join(",")+" )"})}else{e={x:e.x/100*t.width(),y:e.y/100*t.height()},a={x:a.x/100*t.width(),y:a.y/100*t.height()};var h=a.x-e.x,p=a.y-e.y,d=Math.atan2(p,h),l=d-Math.PI/2,c=Math.abs(t.width()*Math.sin(l))+Math.abs(t.height()*Math.cos(l)),u=Math.sqrt(p*p+h*h),f=n(a.x<e.x?t.width():0,a.y<e.y?t.height():0),g=Math.tan(d),v=-1/g,m=(v*f.x-f.y-g*e.x+e.y)/(v-g),w={x:m,y:v*m-v*f.x+f.y},b=Math.sqrt(Math.pow(w.x-e.x,2)+Math.pow(w.y-e.y,2));for(s=0;i>s;s++)o.push(" "+r[s][1]+" "+100*(b+u*r[s][0])/c+"%");t.css({"background-image":y+"linear-gradient("+-d+"rad,"+o.join(",")+")"})}}function u(e,a,r){var i=t.Event(e);return a.trigger(i,r),i.isDefaultPrevented()?"prevented":i.isPropagationStopped()?"stopped":""}function f(t){function e(t){this.name="TurnJsError",this.message=t}return e.prototype=new Error,e.prototype.constructor=e,new e(t)}function g(t){var e={top:0,left:0};do e.left+=t.offsetLeft,e.top+=t.offsetTop;while(t=t.offsetParent);return e}function v(){return-1==navigator.userAgent.indexOf("MSIE 9.0")}var m,w,y="",b="4.1.0",x=Math.PI,M=x/2,P="ontouchstart"in window,_=P?{down:"touchstart",move:"touchmove",up:"touchend",over:"touchstart",out:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup",over:"mouseover",out:"mouseout"},z={backward:["bl","tl"],forward:["br","tr"],all:["tl","bl","tr","br","l","r"]},j=["single","double"],O=["ltr","rtl"],k={acceleration:!0,display:"double",duration:600,page:1,gradients:!0,turnCorners:"bl,br",when:null},S={cornerSize:100},T=6,C={init:function(e){m="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style,w=s(),y=d();var a,r=0,i=this.data(),n=this.children();if(e=t.extend({width:this.width(),height:this.height(),direction:this.attr("dir")||this.css("direction")||"ltr"},k,e),i.opts=e,i.pageObjs={},i.pages={},i.pageWrap={},i.pageZoom={},i.pagePlace={},i.pageMv=[],i.zoom=1,i.totalPages=e.pages||0,i.eventHandlers={touchStart:t.proxy(C._touchStart,this),touchMove:t.proxy(C._touchMove,this),touchEnd:t.proxy(C._touchEnd,this),start:t.proxy(C._eventStart,this)},e.when)for(a in e.when)p(a,e.when)&&this.bind(a,e.when[a]);for(this.css({position:"relative",width:e.width,height:e.height}),this.turn("display",e.display),""!==e.direction&&this.turn("direction",e.direction),m&&!P&&e.acceleration&&this.transform(o(0,0,!0)),a=0;a<n.length;a++)"1"!=t(n[a]).attr("ignore")&&this.turn("addPage",n[a],++r);return t(this).bind(_.down,i.eventHandlers.touchStart).bind("end",C._eventEnd).bind("pressed",C._eventPressed).bind("released",C._eventReleased).bind("flip",C._flip),t(this).parent().bind("start",i.eventHandlers.start),t(document).bind(_.move,i.eventHandlers.touchMove).bind(_.up,i.eventHandlers.touchEnd),this.turn("page",e.page),i.done=!0,this},addPage:function(e,a){var r,i,n=!1,s=this.data(),o=s.totalPages+1;if(s.destroying)return!1;if((r=/\bp([0-9]+)\b/.exec(t(e).attr("class")))&&(a=parseInt(r[1],10)),a){if(a==o)n=!0;else if(a>o)throw f('Page "'+a+'" cannot be inserted')}else a=o,n=!0;return a>=1&&o>=a&&(i="double"==s.display?a%2?" odd":" even":"",s.done&&this.turn("stop"),a in s.pageObjs&&C._movePages.call(this,a,1),n&&(s.totalPages=o),s.pageObjs[a]=t(e).css({"float":"left"}).addClass("page p"+a+i),!v()&&s.pageObjs[a].hasClass("hard")&&s.pageObjs[a].removeClass("hard"),C._addPage.call(this,a),C._removeFromDOM.call(this)),this},_addPage:function(e){var a=this.data(),r=a.pageObjs[e];if(r)if(C._necessPage.call(this,e)){if(!a.pageWrap[e]){a.pageWrap[e]=t("<div/>",{"class":"page-wrapper",page:e,css:{position:"absolute",overflow:"hidden"}}),this.append(a.pageWrap[e]),a.pagePlace[e]||(a.pagePlace[e]=e,a.pageObjs[e].appendTo(a.pageWrap[e]));var i=C._pageSize.call(this,e,!0);r.css({width:i.width,height:i.height}),a.pageWrap[e].css(i)}a.pagePlace[e]==e&&C._makeFlip.call(this,e)}else a.pagePlace[e]=0,a.pageObjs[e]&&a.pageObjs[e].remove()},hasPage:function(t){return p(t,this.data().pageObjs)},center:function(e){var a=this.data(),r=t(this).turn("size"),i=0;if(!a.noCenter){if("double"==a.display){var n=this.turn("view",e||a.tpage||a.page);"ltr"==a.direction?n[0]?n[1]||(i+=r.width/4):i-=r.width/4:n[0]?n[1]||(i-=r.width/4):i+=r.width/4}t(this).css({marginLeft:i})}return this},destroy:function(){var e=this,a=this.data(),r=["end","first","flip","last","pressed","released","start","turning","turned","zooming","missing"];if("prevented"!=u("destroying",this)){for(a.destroying=!0,t.each(r,function(t,a){e.unbind(a)}),this.parent().unbind("start",a.eventHandlers.start),t(document).unbind(_.move,a.eventHandlers.touchMove).unbind(_.up,a.eventHandlers.touchEnd);0!==a.totalPages;)this.turn("removePage",a.totalPages);return a.fparent&&a.fparent.remove(),a.shadow&&a.shadow.remove(),this.removeData(),a=null,this}},is:function(){return"object"==typeof this.data().pages},zoom:function(e){var a=this.data();if("number"==typeof e){if(.001>e||e>100)throw f(e+" is not a value for zoom");if("prevented"==u("zooming",this,[e,a.zoom]))return this;var r=this.turn("size"),i=this.turn("view"),n=1/a.zoom,s=Math.round(r.width*n*e),o=Math.round(r.height*n*e);a.zoom=e,t(this).turn("stop").turn("size",s,o),a.opts.autoCenter&&this.turn("center"),C._updateShadow.call(this);for(var h=0;h<i.length;h++)i[h]&&a.pageZoom[i[h]]!=a.zoom&&(this.trigger("zoomed",[i[h],i,a.pageZoom[i[h]],a.zoom]),a.pageZoom[i[h]]=a.zoom);return this}return a.zoom},_pageSize:function(t,e){var a=this.data(),r={};if("single"==a.display)r.width=this.width(),r.height=this.height(),e&&(r.top=0,r.left=0,r.right="auto");else{var i=this.width()/2,n=this.height();if(a.pageObjs[t].hasClass("own-size")?(r.width=a.pageObjs[t].width(),r.height=a.pageObjs[t].height()):(r.width=i,r.height=n),e){var s=t%2;r.top=(n-r.height)/2,"ltr"==a.direction?(r[s?"right":"left"]=i-r.width,r[s?"left":"right"]="auto"):(r[s?"left":"right"]=i-r.width,r[s?"right":"left"]="auto")}}return r},_makeFlip:function(t){var e=this.data();if(!e.pages[t]&&e.pagePlace[t]==t){var a="single"==e.display,r=t%2;e.pages[t]=e.pageObjs[t].css(C._pageSize.call(this,t)).flip({page:t,next:r||a?t+1:t-1,turn:this}).flip("disable",e.disabled),C._setPageLoc.call(this,t),e.pageZoom[t]=e.zoom}return e.pages[t]},_makeRange:function(){var t,e,a=this.data();if(!(a.totalPages<1))for(e=this.turn("range"),t=e[0];t<=e[1];t++)C._addPage.call(this,t)},range:function(t){var e,a,r,i,n=this.data();if(t=t||n.tpage||n.page||1,i=C._view.call(this,t),1>t||t>n.totalPages)throw f('"'+t+'" is not a valid page');return i[1]=i[1]||i[0],i[0]>=1&&i[1]<=n.totalPages?(e=Math.floor((T-2)/2),n.totalPages-i[1]>i[0]?(a=Math.min(i[0]-1,e),r=2*e-a):(r=Math.min(n.totalPages-i[1],e),a=2*e-r)):(a=T-1,r=T-1),[Math.max(1,i[0]-a),Math.min(n.totalPages,i[1]+r)]},_necessPage:function(t){if(0===t)return!0;var e=this.turn("range");return this.data().pageObjs[t].hasClass("fixed")||t>=e[0]&&t<=e[1]},_removeFromDOM:function(){var t,e=this.data();for(t in e.pageWrap)p(t,e.pageWrap)&&!C._necessPage.call(this,t)&&C._removePageFromDOM.call(this,t)},_removePageFromDOM:function(t){var e=this.data();if(e.pages[t]){var a=e.pages[t].data();E._moveFoldingPage.call(e.pages[t],!1),a.f&&a.f.fwrapper&&a.f.fwrapper.remove(),e.pages[t].removeData(),e.pages[t].remove(),delete e.pages[t]}e.pageObjs[t]&&e.pageObjs[t].remove(),e.pageWrap[t]&&(e.pageWrap[t].remove(),delete e.pageWrap[t]),C._removeMv.call(this,t),delete e.pagePlace[t],delete e.pageZoom[t]},removePage:function(t){var e=this.data();if("*"==t)for(;0!==e.totalPages;)this.turn("removePage",e.totalPages);else{if(1>t||t>e.totalPages)throw f("The page "+t+" doesn't exist");e.pageObjs[t]&&(this.turn("stop"),C._removePageFromDOM.call(this,t),delete e.pageObjs[t]),C._movePages.call(this,t,-1),e.totalPages=e.totalPages-1,e.page>e.totalPages?(e.page=null,C._fitPage.call(this,e.totalPages)):(C._makeRange.call(this),this.turn("update"))}return this},_movePages:function(t,e){var a,r=this,i=this.data(),n="single"==i.display,s=function(t){var a=t+e,s=a%2,o=s?" odd ":" even ";i.pageObjs[t]&&(i.pageObjs[a]=i.pageObjs[t].removeClass("p"+t+" odd even").addClass("p"+a+o)),i.pagePlace[t]&&i.pageWrap[t]&&(i.pagePlace[a]=a,i.pageObjs[a].hasClass("fixed")?i.pageWrap[a]=i.pageWrap[t].attr("page",a):i.pageWrap[a]=i.pageWrap[t].css(C._pageSize.call(r,a,!0)).attr("page",a),i.pages[t]&&(i.pages[a]=i.pages[t].flip("options",{page:a,next:n||s?a+1:a-1})),e&&(delete i.pages[t],delete i.pagePlace[t],delete i.pageZoom[t],delete i.pageObjs[t],delete i.pageWrap[t]))};if(e>0)for(a=i.totalPages;a>=t;a--)s(a);else for(a=t;a<=i.totalPages;a++)s(a)},display:function(e){var a=this.data(),r=a.display;if(void 0===e)return r;if(-1==t.inArray(e,j))throw f('"'+e+'" is not a value for display');switch(e){case"single":a.pageObjs[0]||(this.turn("stop").css({overflow:"hidden"}),a.pageObjs[0]=t("<div />",{"class":"page p-temporal"}).css({width:this.width(),height:this.height()}).appendTo(this)),this.addClass("shadow");break;case"double":a.pageObjs[0]&&(this.turn("stop").css({overflow:""}),a.pageObjs[0].remove(),delete a.pageObjs[0]),this.removeClass("shadow")}if(a.display=e,r){var i=this.turn("size");C._movePages.call(this,1,0),this.turn("size",i.width,i.height).turn("update")}return this},direction:function(e){var a=this.data();if(void 0===e)return a.direction;if(e=e.toLowerCase(),-1==t.inArray(e,O))throw f('"'+e+'" is not a value for direction');return"rtl"==e&&t(this).attr("dir","ltr").css({direction:"ltr"}),a.direction=e,a.done&&this.turn("size",t(this).width(),t(this).height()),this},animating:function(){return this.data().pageMv.length>0},corner:function(){var t,e,a=this.data();for(e in a.pages)if(p(e,a.pages)&&(t=a.pages[e].flip("corner")))return t;return!1},data:function(){return this.data()},disable:function(e){var a,r=this.data(),i=this.turn("view");r.disabled=void 0===e||e===!0;for(a in r.pages)p(a,r.pages)&&r.pages[a].flip("disable",r.disabled?!0:-1==t.inArray(parseInt(a,10),i));return this},disabled:function(t){return void 0===t?this.data().disabled===!0:this.turn("disable",t)},size:function(t,e){if(void 0===t||void 0===e)return{width:this.width(),height:this.height()};this.turn("stop");var a,r,i=this.data(),n="double"==i.display?t/2:t;this.css({width:t,height:e}),i.pageObjs[0]&&i.pageObjs[0].css({width:n,height:e});for(a in i.pageWrap)p(a,i.pageWrap)&&(r=C._pageSize.call(this,a,!0),i.pageObjs[a].css({width:r.width,height:r.height}),i.pageWrap[a].css(r),i.pages[a]&&i.pages[a].css({width:r.width,height:r.height}));return this.turn("resize"),this},resize:function(){var t,e=this.data();for(e.pages[0]&&(e.pageWrap[0].css({left:-this.width()}),e.pages[0].flip("resize",!0)),t=1;t<=e.totalPages;t++)e.pages[t]&&e.pages[t].flip("resize",!0);C._updateShadow.call(this),e.opts.autoCenter&&this.turn("center")},_removeMv:function(t){var e,a=this.data();for(e=0;e<a.pageMv.length;e++)if(a.pageMv[e]==t)return a.pageMv.splice(e,1),!0;return!1},_addMv:function(t){var e=this.data();C._removeMv.call(this,t),e.pageMv.push(t)},_view:function(t){var e=this.data();return t=t||e.page,"double"==e.display?t%2?[t-1,t]:[t,t+1]:[t]},view:function(t){var e=this.data(),a=C._view.call(this,t);return"double"==e.display?[a[0]>0?a[0]:0,a[1]<=e.totalPages?a[1]:0]:[a[0]>0&&a[0]<=e.totalPages?a[0]:0]},stop:function(t,e){if(this.turn("animating")){var a,r,i,n=this.data();for(n.tpage&&(n.page=n.tpage,delete n.tpage),a=0;a<n.pageMv.length;a++)n.pageMv[a]&&n.pageMv[a]!==t&&(i=n.pages[n.pageMv[a]],r=i.data().f.opts,i.flip("hideFoldedPage",e),e||E._moveFoldingPage.call(i,!1),r.force&&(r.next=r.page%2===0?r.page-1:r.page+1,delete r.force))}return this.turn("update"),this},pages:function(t){var e=this.data();if(t){if(t<e.totalPages)for(var a=e.totalPages;a>t;a--)this.turn("removePage",a);return e.totalPages=t,C._fitPage.call(this,e.page),this}return e.totalPages},_missing:function(t){var e=this.data();if(!(e.totalPages<1)){var a,r=this.turn("range",t),i=[];for(a=r[0];a<=r[1];a++)e.pageObjs[a]||i.push(a);i.length>0&&this.trigger("missing",[i])}},_fitPage:function(t){var e=this.data(),a=this.turn("view",t);if(C._missing.call(this,t),e.pageObjs[t]){e.page=t,this.turn("stop");for(var r=0;r<a.length;r++)a[r]&&e.pageZoom[a[r]]!=e.zoom&&(this.trigger("zoomed",[a[r],a,e.pageZoom[a[r]],e.zoom]),e.pageZoom[a[r]]=e.zoom);C._removeFromDOM.call(this),C._makeRange.call(this),C._updateShadow.call(this),this.trigger("turned",[t,a]),this.turn("update"),e.opts.autoCenter&&this.turn("center")}},_turnPage:function(e){var a,r,i=this.data(),n=i.pagePlace[e],s=this.turn("view"),o=this.turn("view",e);if(i.page!=e){var h=i.page;if("prevented"==u("turning",this,[e,o]))return void(h==i.page&&-1!=t.inArray(n,i.pageMv)&&i.pages[n].flip("hideFoldedPage",!0));-1!=t.inArray(1,o)&&this.trigger("first"),-1!=t.inArray(i.totalPages,o)&&this.trigger("last")}"single"==i.display?(a=s[0],r=o[0]):s[1]&&e>s[1]?(a=s[1],r=o[0]):s[0]&&e<s[0]&&(a=s[0],r=o[1]);var p=i.opts.turnCorners.split(","),d=i.pages[a].data().f,l=d.opts,c=d.point;C._missing.call(this,e),i.pageObjs[e]&&(this.turn("stop"),i.page=e,C._makeRange.call(this),i.tpage=r,l.next!=r&&(l.next=r,l.force=!0),this.turn("update"),d.point=c,"hard"==d.effect?"ltr"==i.direction?i.pages[a].flip("turnPage",e>a?"r":"l"):i.pages[a].flip("turnPage",e>a?"l":"r"):"ltr"==i.direction?i.pages[a].flip("turnPage",p[e>a?1:0]):i.pages[a].flip("turnPage",p[e>a?0:1]))},page:function(e){var a=this.data();if(void 0===e)return a.page;if(!a.disabled&&!a.destroying){if(e=parseInt(e,10),e>0&&e<=a.totalPages)return e!=a.page&&(a.done&&-1==t.inArray(e,this.turn("view"))?C._turnPage.call(this,e):C._fitPage.call(this,e)),this;throw f("The page "+e+" does not exist")}},next:function(){return this.turn("page",Math.min(this.data().totalPages,C._view.call(this,this.data().page).pop()+1))},previous:function(){return this.turn("page",Math.max(1,C._view.call(this,this.data().page).shift()-1))},peel:function(t,e){var a=this.data(),r=this.turn("view");if(e=void 0===e?!0:e===!0,t===!1)this.turn("stop",null,e);else if("single"==a.display)a.pages[a.page].flip("peel",t,e);else{var i;i="ltr"==a.direction?-1!=t.indexOf("l")?r[0]:r[1]:-1!=t.indexOf("l")?r[1]:r[0],a.pages[i]&&a.pages[i].flip("peel",t,e)}return this},_addMotionPage:function(){var e=t(this).data().f.opts,a=e.turn;a.data();C._addMv.call(a,e.page)},_eventStart:function(t,e,a){var r=e.turn.data(),i=r.pageZoom[e.page];return t.isDefaultPrevented()?void C._updateShadow.call(e.turn):(i&&i!=r.zoom&&(e.turn.trigger("zoomed",[e.page,e.turn.turn("view",e.page),i,r.zoom]),r.pageZoom[e.page]=r.zoom),"single"==r.display&&a&&("l"==a.charAt(1)&&"ltr"==r.direction||"r"==a.charAt(1)&&"rtl"==r.direction?(e.next=e.next<e.page?e.next:e.page-1,e.force=!0):e.next=e.next>e.page?e.next:e.page+1),C._addMotionPage.call(t.target),void C._updateShadow.call(e.turn))},_eventEnd:function(e,a,r){var i=t(e.target),n=(i.data().f,a.turn),s=n.data();if(r){var o=s.tpage||s.page;(o==a.next||o==a.page)&&(delete s.tpage,C._fitPage.call(n,o||a.next,!0))}else C._removeMv.call(n,a.page),C._updateShadow.call(n),n.turn("update")},_eventPressed:function(e){var a=t(e.target).data().f,r=a.opts.turn,i=r.data();i.pages;return i.mouseAction=!0,r.turn("update"),a.time=(new Date).getTime()},_eventReleased:function(e,a){var r,i=t(e.target),n=i.data().f,s=n.opts.turn,o=s.data();r="single"==o.display?"br"==a.corner||"tr"==a.corner?a.x<i.width()/2:a.x>i.width()/2:a.x<0||a.x>i.width(),((new Date).getTime()-n.time<200||r)&&(e.preventDefault(),C._turnPage.call(s,n.opts.next)),o.mouseAction=!1},_flip:function(e){e.stopPropagation();var a=t(e.target).data().f.opts;a.turn.trigger("turn",[a.next]),a.turn.data().opts.autoCenter&&a.turn.turn("center",a.next)},_touchStart:function(){var t=this.data();for(var e in t.pages)if(p(e,t.pages)&&E._eventStart.apply(t.pages[e],arguments)===!1)return!1},_touchMove:function(){var t=this.data();for(var e in t.pages)p(e,t.pages)&&E._eventMove.apply(t.pages[e],arguments)},_touchEnd:function(){var t=this.data();for(var e in t.pages)p(e,t.pages)&&E._eventEnd.apply(t.pages[e],arguments)},calculateZ:function(t){var e,a,r,i,n,s=this,o=this.data(),h=this.turn("view"),p=h[0]||h[1],d=t.length-1,l={pageZ:{},partZ:{},pageV:{}},c=function(t){var e=s.turn("view",t);e[0]&&(l.pageV[e[0]]=!0),e[1]&&(l.pageV[e[1]]=!0)};for(e=0;d>=e;e++)a=t[e],r=o.pages[a].data().f.opts.next,i=o.pagePlace[a],c(a),c(r),n=o.pagePlace[r]==r?r:a,l.pageZ[n]=o.totalPages-Math.abs(p-n),l.partZ[i]=2*o.totalPages-d+e;return l},update:function(){var e,a=this.data();if(this.turn("animating")&&0!==a.pageMv[0]){var r,i,n=this.turn("calculateZ",a.pageMv),s=this.turn("corner"),o=this.turn("view"),h=this.turn("view",a.tpage);for(e in a.pageWrap)p(e,a.pageWrap)&&(i=a.pageObjs[e].hasClass("fixed"),a.pageWrap[e].css({display:n.pageV[e]||i?"":"none",zIndex:(a.pageObjs[e].hasClass("hard")?n.partZ[e]:n.pageZ[e])||(i?-1:0)}),(r=a.pages[e])&&(r.flip("z",n.partZ[e]||null),n.pageV[e]&&r.flip("resize"),a.tpage?r.flip("hover",!1).flip("disable",-1==t.inArray(parseInt(e,10),a.pageMv)&&e!=h[0]&&e!=h[1]):r.flip("hover",s===!1).flip("disable",e!=o[0]&&e!=o[1])))}else for(e in a.pageWrap)if(p(e,a.pageWrap)){var d=C._setPageLoc.call(this,e);a.pages[e]&&a.pages[e].flip("disable",a.disabled||1!=d).flip("hover",!0).flip("z",null)}return this},_updateShadow:function(){var e,r,i,n=this.data(),s=this.width(),o=this.height(),h="single"==n.display?s:s/2;e=this.turn("view"),n.shadow||(n.shadow=t("<div />",{"class":"shadow",css:a(0,0,0).css}).appendTo(this));for(var p=0;p<n.pageMv.length&&(e[0]&&e[1]);p++)e=this.turn("view",n.pages[n.pageMv[p]].data().f.opts.next),r=this.turn("view",n.pageMv[p]),e[0]=e[0]&&r[0],e[1]=e[1]&&r[1];switch(i=e[0]?e[1]?3:"ltr"==n.direction?2:1:"ltr"==n.direction?1:2){case 1:n.shadow.css({width:h,height:o,top:0,left:h});break;case 2:n.shadow.css({width:h,height:o,top:0,left:0});break;case 3:n.shadow.css({width:s,height:o,top:0,left:0})}},_setPageLoc:function(t){var e=this.data(),a=this.turn("view"),r=0;if(t==a[0]||t==a[1]?r=1:("single"==e.display&&t==a[0]+1||"double"==e.display&&t==a[0]-2||t==a[1]+2)&&(r=2),!this.turn("animating"))switch(r){case 1:e.pageWrap[t].css({zIndex:e.totalPages,display:""});break;case 2:e.pageWrap[t].css({zIndex:e.totalPages-1,display:""});break;case 0:e.pageWrap[t].css({zIndex:0,display:e.pageObjs[t].hasClass("fixed")?"":"none"})}return r},options:function(e){if(void 0===e)return this.data().opts;var a=this.data();if(t.extend(a.opts,e),e.pages&&this.turn("pages",e.pages),e.page&&this.turn("page",e.page),e.display&&this.turn("display",e.display),e.direction&&this.turn("direction",e.direction),e.width&&e.height&&this.turn("size",e.width,e.height),e.when)for(var r in e.when)p(r,e.when)&&this.unbind(r).bind(r,e.when[r]);return this},version:function(){return b}},E={init:function(t){return this.data({f:{disabled:!1,hover:!1,effect:this.hasClass("hard")?"hard":"sheet"}}),this.flip("options",t),E._addPageWrapper.call(this),this},setData:function(e){var a=this.data();return a.f=t.extend(a.f,e),this},options:function(e){var a=this.data().f;return e?(E.setData.call(this,{opts:t.extend({},a.opts||S,e)}),this):a.opts},z:function(t){var e=this.data().f;return e.opts["z-index"]=t,e.fwrapper&&e.fwrapper.css({zIndex:t||parseInt(e.parent.css("z-index"),10)||0}),this},_cAllowed:function(){var t=this.data().f,e=t.opts.page,a=t.opts.turn.data(),r=e%2;return"hard"==t.effect?"ltr"==a.direction?[r?"r":"l"]:[r?"l":"r"]:"single"==a.display?1==e?"ltr"==a.direction?z.forward:z.backward:e==a.totalPages?"ltr"==a.direction?z.backward:z.forward:z.all:"ltr"==a.direction?z[r?"forward":"backward"]:z[r?"backward":"forward"]},_cornerActivated:function(e){var a=this.data().f,r=this.width(),i=this.height(),n={x:e.x,y:e.y,corner:""},s=a.opts.cornerSize;if(n.x<=0||n.y<=0||n.x>=r||n.y>=i)return!1;var o=E._cAllowed.call(this);switch(a.effect){case"hard":if(n.x>r-s)n.corner="r";else{if(!(n.x<s))return!1;n.corner="l"}break;case"sheet":if(n.y<s)n.corner+="t";else{if(!(n.y>=i-s))return!1;n.corner+="b"}if(n.x<=s)n.corner+="l";else{if(!(n.x>=r-s))return!1;n.corner+="r"}}return n.corner&&-1!=t.inArray(n.corner,o)?n:!1},_isIArea:function(t){var e=this.data().f.parent.offset();return t=P&&t.originalEvent?t.originalEvent.touches[0]:t,E._cornerActivated.call(this,{x:t.pageX-e.left,y:t.pageY-e.top})},_c:function(t,e){switch(e=e||0,t){case"tl":return n(e,e);case"tr":return n(this.width()-e,e);case"bl":return n(e,this.height()-e);case"br":return n(this.width()-e,this.height()-e);case"l":return n(e,0);case"r":return n(this.width()-e,0)}},_c2:function(t){switch(t){case"tl":return n(2*this.width(),0);case"tr":return n(-this.width(),0);case"bl":return n(2*this.width(),this.height());case"br":return n(-this.width(),this.height());case"l":return n(2*this.width(),0);case"r":return n(-this.width(),0)}},_foldingPage:function(){var t=this.data().f;if(t){var e=t.opts;return e.turn?(t=e.turn.data(),"single"==t.display?e.next>1||e.page>1?t.pageObjs[0]:null:t.pageObjs[e.next]):void 0}},_backGradient:function(){var e=this.data().f,r=e.opts.turn.data(),i=r.opts.gradients&&("single"==r.display||2!=e.opts.page&&e.opts.page!=r.totalPages-1);return i&&!e.bshadow&&(e.bshadow=t("<div/>",a(0,0,1)).css({position:"",width:this.width(),height:this.height()}).appendTo(e.parent)),i},type:function(){return this.data().f.effect},resize:function(t){var e=this.data().f,a=e.opts.turn.data(),r=this.width(),i=this.height();switch(e.effect){case"hard":t&&(e.wrapper.css({width:r,height:i}),e.fpage.css({width:r,height:i}),a.opts.gradients&&(e.ashadow.css({width:r,height:i}),e.bshadow.css({width:r,height:i})));break;case"sheet":if(t){var n=Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));e.wrapper.css({width:n,height:n}),e.fwrapper.css({width:n,height:n}).children(":first-child").css({width:r,height:i}),e.fpage.css({width:r,height:i}),a.opts.gradients&&e.ashadow.css({width:r,height:i}),E._backGradient.call(this)&&e.bshadow.css({width:r,height:i})}if(e.parent.is(":visible")){var s=g(e.parent[0]);e.fwrapper.css({top:s.top,left:s.left}),s=g(e.opts.turn[0]),e.fparent.css({top:-s.top,left:-s.left})}this.flip("z",e.opts["z-index"])}},_addPageWrapper:function(){var e=this.data().f,r=e.opts.turn.data(),i=this.parent();if(e.parent=i,!e.wrapper)switch(e.effect){case"hard":var n={};n[y+"transform-style"]="preserve-3d",n[y+"backface-visibility"]="hidden",e.wrapper=t("<div/>",a(0,0,2)).css(n).appendTo(i).prepend(this),e.fpage=t("<div/>",a(0,0,1)).css(n).appendTo(i),r.opts.gradients&&(e.ashadow=t("<div/>",a(0,0,0)).hide().appendTo(i),
e.bshadow=t("<div/>",a(0,0,0)));break;case"sheet":var s=this.width(),o=this.height();Math.round(Math.sqrt(Math.pow(s,2)+Math.pow(o,2)));if(e.fparent=e.opts.turn.data().fparent,!e.fparent){var h=t("<div/>",{css:{"pointer-events":"none"}}).hide();h.data().flips=0,h.css(a(0,0,"auto","visible").css).appendTo(e.opts.turn),e.opts.turn.data().fparent=h,e.fparent=h}this.css({position:"absolute",top:0,left:0,bottom:"auto",right:"auto"}),e.wrapper=t("<div/>",a(0,0,this.css("z-index"))).appendTo(i).prepend(this),e.fwrapper=t("<div/>",a(i.offset().top,i.offset().left)).hide().appendTo(e.fparent),e.fpage=t("<div/>",a(0,0,0,"visible")).css({cursor:"default"}).appendTo(e.fwrapper),r.opts.gradients&&(e.ashadow=t("<div/>",a(0,0,1)).appendTo(e.fpage)),E.setData.call(this,e)}E.resize.call(this,!0)},_fold:function(t){var e=this.data().f,a=e.opts.turn.data(),r=E._c.call(this,t.corner),s=this.width(),p=this.height();switch(e.effect){case"hard":"l"==t.corner?t.x=Math.min(Math.max(t.x,0),2*s):t.x=Math.max(Math.min(t.x,s),-s);var d,l,u,f,g,v=a.totalPages,m=e.opts["z-index"]||v,b={overflow:"visible"},P=r.x?(r.x-t.x)/s:t.x/s,_=90*P,z=90>_;switch(t.corner){case"l":f="0% 50%",g="100% 50%",z?(d=0,l=e.opts.next-1>0,u=1):(d="100%",l=e.opts.page+1<v,u=0);break;case"r":f="100% 50%",g="0% 50%",_=-_,s=-s,z?(d=0,l=e.opts.next+1<v,u=0):(d="-100%",l=1!=e.opts.page,u=1)}b[y+"perspective-origin"]=g,e.wrapper.transform("rotateY("+_+"deg)translate3d(0px, 0px, "+(this.attr("depth")||0)+"px)",g),e.fpage.transform("translateX("+s+"px) rotateY("+(180+_)+"deg)",f),e.parent.css(b),z?(P=-P+1,e.wrapper.css({zIndex:m+1}),e.fpage.css({zIndex:m})):(P-=1,e.wrapper.css({zIndex:m}),e.fpage.css({zIndex:m+1})),a.opts.gradients&&(l?e.ashadow.css({display:"",left:d,backgroundColor:"rgba(0,0,0,"+.5*P+")"}).transform("rotateY(0deg)"):e.ashadow.hide(),e.bshadow.css({opacity:-P+1}),z?e.bshadow.parent()[0]!=e.wrapper[0]&&e.bshadow.appendTo(e.wrapper):e.bshadow.parent()[0]!=e.fpage[0]&&e.bshadow.appendTo(e.fpage),c(e.bshadow,n(100*u,0),n(100*(-u+1),0),[[0,"rgba(0,0,0,0.3)"],[1,"rgba(0,0,0,0)"]],2));break;case"sheet":var j,O,k,S,T,C,A,F=this,W=0,D=0,I=n(0,0),Z=n(0,0),L=n(0,0),q=E._foldingPage.call(this),N=(Math.tan(D),a.opts.acceleration),R=e.wrapper.height(),H="t"==t.corner.substr(0,1),B="l"==t.corner.substr(1,1),V=function(){var e=n(0,0),o=n(0,0);e.x=r.x?r.x-t.x:t.x,w?e.y=r.y?r.y-t.y:t.y:e.y=0,o.x=B?s-e.x/2:t.x+e.x/2,o.y=e.y/2;var h=M-Math.atan2(e.y,e.x),d=h-Math.atan2(o.y,o.x),l=Math.max(0,Math.sin(d)*Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)));if(W=i(h),L=n(l*Math.sin(h),l*Math.cos(h)),h>M&&(L.x=L.x+Math.abs(L.y*e.y/e.x),L.y=0,Math.round(L.x*Math.tan(x-h))<p))return t.y=Math.sqrt(Math.pow(p,2)+2*o.x*e.x),H&&(t.y=p-t.y),V();if(h>M){var c=x-h,u=R-p/Math.sin(c);I=n(Math.round(u*Math.cos(c)),Math.round(u*Math.sin(c))),B&&(I.x=-I.x),H&&(I.y=-I.y)}j=Math.round(L.y/Math.tan(h)+L.x);var f=s-j,g=f*Math.cos(2*h),v=f*Math.sin(2*h);if(Z=n(Math.round(B?f-g:j+g),Math.round(H?v:p-v)),a.opts.gradients){T=f*Math.sin(h);var m=E._c2.call(F,t.corner),y=Math.sqrt(Math.pow(m.x-t.x,2)+Math.pow(m.y-t.y,2))/s;A=Math.sin(M*(y>1?2-y:y)),C=Math.min(y,1),S=T>100?(T-100)/T:0,O=n(T*Math.sin(h)/s*100,T*Math.cos(h)/p*100),E._backGradient.call(F)&&(k=n(1.2*T*Math.sin(h)/s*100,1.2*T*Math.cos(h)/p*100),B||(k.x=100-k.x),H||(k.y=100-k.y))}return L.x=Math.round(L.x),L.y=Math.round(L.y),!0},Y=function(t,r,i,d){var l=["0","auto"],u=(s-R)*i[0]/100,f=(p-R)*i[1]/100,g={left:l[r[0]],top:l[r[1]],right:l[r[2]],bottom:l[r[3]]},v={},m=90!=d&&-90!=d?B?-1:1:0,w=i[0]+"% "+i[1]+"%";F.css(g).transform(h(d)+o(t.x+m,t.y,N),w),e.fpage.css(g).transform(h(d)+o(t.x+Z.x-I.x-s*i[0]/100,t.y+Z.y-I.y-p*i[1]/100,N)+h((180/d-2)*d),w),e.wrapper.transform(o(-t.x+u-m,-t.y+f,N)+h(-d),w),e.fwrapper.transform(o(-t.x+I.x+u,-t.y+I.y+f,N)+h(-d),w),a.opts.gradients&&(i[0]&&(O.x=100-O.x),i[1]&&(O.y=100-O.y),v["box-shadow"]="0 0 20px rgba(0,0,0,"+.5*A+")",q.css(v),c(e.ashadow,n(B?100:0,H?0:100),n(O.x,O.y),[[S,"rgba(0,0,0,0)"],[.8*(1-S)+S,"rgba(0,0,0,"+.2*C+")"],[1,"rgba(255,255,255,"+.2*C+")"]],3,D),E._backGradient.call(F)&&c(e.bshadow,n(B?0:100,H?0:100),n(k.x,k.y),[[.6,"rgba(0,0,0,0)"],[.8,"rgba(0,0,0,"+.3*C+")"],[1,"rgba(0,0,0,0)"]],3))};switch(t.corner){case"l":break;case"r":break;case"tl":t.x=Math.max(t.x,1),V(),Y(L,[1,0,0,1],[100,0],W);break;case"tr":t.x=Math.min(t.x,s-1),V(),Y(n(-L.x,L.y),[0,0,0,1],[0,0],-W);break;case"bl":t.x=Math.max(t.x,1),V(),Y(n(L.x,-L.y),[1,1,0,0],[100,100],-W);break;case"br":t.x=Math.min(t.x,s-1),V(),Y(n(-L.x,-L.y),[0,1,1,0],[0,100],W)}}e.point=t},_moveFoldingPage:function(t){var e=this.data().f;if(e){var a=e.opts.turn,r=a.data(),i=r.pagePlace;if(t){var n=e.opts.next;if(i[n]!=e.opts.page){e.folding&&E._moveFoldingPage.call(this,!1);var s=E._foldingPage.call(this);s.appendTo(e.fpage),i[n]=e.opts.page,e.folding=n}a.turn("update")}else if(e.folding){if(r.pages[e.folding]){var o=r.pages[e.folding].data().f;r.pageObjs[e.folding].appendTo(o.wrapper)}else r.pageWrap[e.folding]&&r.pageObjs[e.folding].appendTo(r.pageWrap[e.folding]);e.folding in i&&(i[e.folding]=e.folding),delete e.folding}}},_showFoldedPage:function(t,e){var a=E._foldingPage.call(this),r=this.data(),i=r.f,n=i.visible;if(a){if(!n||!i.point||i.point.corner!=t.corner){var s="hover"==i.status||"peel"==i.status||i.opts.turn.data().mouseAction?t.corner:null;if(n=!1,"prevented"==u("start",this,[i.opts,s]))return!1}if(e){var o=this,h=i.point&&i.point.corner==t.corner?i.point:E._c.call(this,t.corner,1);this.animatef({from:[h.x,h.y],to:[t.x,t.y],duration:500,frame:function(e){t.x=Math.round(e[0]),t.y=Math.round(e[1]),E._fold.call(o,t)}})}else E._fold.call(this,t),r.effect&&!r.effect.turning&&this.animatef(!1);if(!n)switch(i.effect){case"hard":i.visible=!0,E._moveFoldingPage.call(this,!0),i.fpage.show(),i.opts.shadows&&i.bshadow.show();break;case"sheet":i.visible=!0,i.fparent.show().data().flips++,E._moveFoldingPage.call(this,!0),i.fwrapper.show(),i.bshadow&&i.bshadow.show()}return!0}return!1},hide:function(){var t=this.data().f,e=t.opts.turn.data(),a=E._foldingPage.call(this);switch(t.effect){case"hard":e.opts.gradients&&(t.bshadowLoc=0,t.bshadow.remove(),t.ashadow.hide()),t.wrapper.transform(""),t.fpage.hide();break;case"sheet":0===--t.fparent.data().flips&&t.fparent.hide(),this.css({left:0,top:0,right:"auto",bottom:"auto"}).transform(""),t.wrapper.transform(""),t.fwrapper.hide(),t.bshadow&&t.bshadow.hide(),a.transform("")}return t.visible=!1,this},hideFoldedPage:function(t){var e=this.data().f;if(e.point){var a=this,i=e.point,s=function(){e.point=null,e.status="",a.flip("hide"),a.trigger("end",[e.opts,!1])};if(t){var o=E._c.call(this,i.corner),h="t"==i.corner.substr(0,1),p=h?Math.min(0,i.y-o.y)/2:Math.max(0,i.y-o.y)/2,d=n(i.x,i.y+p),l=n(o.x,o.y-p);this.animatef({from:0,to:1,frame:function(t){var e=r(i,d,l,o,t);i.x=e.x,i.y=e.y,E._fold.call(a,i)},complete:s,duration:800,hiding:!0})}else this.animatef(!1),s()}},turnPage:function(t){var e=this,a=this.data().f,i=a.opts.turn.data();t={corner:a.corner?a.corner.corner:t||E._cAllowed.call(this)[0]};var n=a.point||E._c.call(this,t.corner,a.opts.turn?i.opts.elevation:0),s=E._c2.call(this,t.corner);this.trigger("flip").animatef({from:0,to:1,frame:function(a){var i=r(n,n,s,s,a);t.x=i.x,t.y=i.y,E._showFoldedPage.call(e,t)},complete:function(){e.trigger("end",[a.opts,!0])},duration:i.opts.duration,turning:!0}),a.corner=null},moving:function(){return"effect"in this.data()},isTurning:function(){return this.flip("moving")&&this.data().effect.turning},corner:function(){return this.data().f.corner},_eventStart:function(t){var e=this.data().f,a=e.opts.turn;if(!e.corner&&!e.disabled&&!this.flip("isTurning")&&e.opts.page==a.data().pagePlace[e.opts.page]){if(e.corner=E._isIArea.call(this,t),e.corner&&E._foldingPage.call(this))return this.trigger("pressed",[e.point]),E._showFoldedPage.call(this,e.corner),!1;e.corner=null}},_eventMove:function(t){var e=this.data().f;if(!e.disabled)if(t=P?t.originalEvent.touches:[t],e.corner){var a=e.parent.offset();e.corner.x=t[0].pageX-a.left,e.corner.y=t[0].pageY-a.top,E._showFoldedPage.call(this,e.corner)}else if(e.hover&&!this.data().effect&&this.is(":visible")){var r=E._isIArea.call(this,t[0]);if(r){if("sheet"==e.effect&&2==r.corner.length||"hard"==e.effect){e.status="hover";var i=E._c.call(this,r.corner,e.opts.cornerSize/2);r.x=i.x,r.y=i.y,E._showFoldedPage.call(this,r,!0)}}else"hover"==e.status&&(e.status="",E.hideFoldedPage.call(this,!0))}},_eventEnd:function(){var t=this.data().f,e=t.corner;!t.disabled&&e&&"prevented"!=u("released",this,[t.point||e])&&E.hideFoldedPage.call(this,!0),t.corner=null},disable:function(t){return E.setData.call(this,{disabled:t}),this},hover:function(t){return E.setData.call(this,{hover:t}),this},peel:function(e,a){var r=this.data().f;if(e){if(-1==t.inArray(e,z.all))throw f("Corner "+e+" is not permitted");if(-1!=t.inArray(e,E._cAllowed.call(this))){var i=E._c.call(this,e,r.opts.cornerSize/2);r.status="peel",E._showFoldedPage.call(this,{corner:e,x:i.x,y:i.y},a)}}else r.status="",E.hideFoldedPage.call(this,a);return this}};window.requestAnim=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),t.extend(t.fn,{flip:function(){return e(t(this[0]),E,arguments)},turn:function(){return e(t(this[0]),C,arguments)},transform:function(t,e){var a={};return e&&(a[y+"transform-origin"]=e),a[y+"transform"]=t,this.css(a)},animatef:function(e){var a=this.data();if(a.effect&&a.effect.stop(),e){e.to.length||(e.to=[e.to]),e.from.length||(e.from=[e.from]);for(var r=[],i=e.to.length,n=!0,s=this,o=(new Date).getTime(),h=function(){if(a.effect&&n){for(var t=[],p=Math.min(e.duration,(new Date).getTime()-o),d=0;i>d;d++)t.push(a.effect.easing(1,p,e.from[d],r[d],e.duration));e.frame(1==i?t[0]:t),p==e.duration?(delete a.effect,s.data(a),e.complete&&e.complete()):window.requestAnim(h)}},p=0;i>p;p++)r.push(e.to[p]-e.from[p]);a.effect=t.extend({stop:function(){n=!1},easing:function(t,e,a,r,i){return r*Math.sqrt(1-(e=e/i-1)*e)+a}},e),this.data(a),h()}else delete a.effect}}),t.isTouch=P,t.mouseEvents=_,t.cssPrefix=d,t.cssTransitionEnd=l,t.findPos=g}(jQuery);